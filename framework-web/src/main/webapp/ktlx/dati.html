<html>
    <head>
        <meta charset="UTF-8">
        <title>答题</title>
        <!-- meta使用viewport以确保页面可自由缩放 -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- 引入 jQuery Mobile 样式 -->
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
        <!-- 引入 jQuery 库 -->
        <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
        <!-- 引入 jQuery Mobile 库 -->
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <script src="../js/Base.js"></script>
    </head>
    <body>
    <div data-role="page" id="page_lianxi">
    <script>
        var exam_getKaojuanUrl = baseURL + "exam/getKaojuan";
        var kaotilist = new Array();
        var kemu_num= 0;
        var c_tk_num = 0;
        var snum = 0;
        var obj = "";
        function getKaoti(zhiwu){
            alert(zhiwu);
            $.ajax({
                url: exam_getKaojuanUrl,
                type: 'POST',
                async : false,
                //dataType:'JSONP',
                data: {"zhiwuid":zhiwu},
                success: function(data){
                    kaotilist = data;
                    alert("kaotilist.length"+kaotilist.length);
                    for(i=0 ;i<kaotilist.length;i ++){
                        $("#f_kemu").append("<button onclick=\"kemuChange("+i+")\" class=\" ui-btn ui-shadow ui-corner-all\">"+kaotilist[i].z_zutimingcheng+"</button>");
                    }
                    $("#l_kemu").append(kaotilist[kemu_num].z_zutimingcheng);
                    $("#l_dangqian").append("当前第"+c_tk_num+"题，共"+kaotilist[kemu_num]["question"].length+"题");
                    
                   // for(obj in kaotilist["optmap"]){
                        //alert("obj:"+obj + " obj val:" + JSON.stringify(kaotilist[obj] ));
                   //     $("#s_kemu").append("<option value=\""+obj+"\">"+kaotilist["optmap"][obj]+"</option>");
                   // }
                   //obj = "all";
                   // initTiku();
                    nextKaoti();
                },
                error: function(data){
                    alert("error: " + JSON.stringify(data) );
                }
            });
        }
        
        function nextKaoti(){
            if( c_tk_num < kaotilist[kemu_num]["question"].length ){
                $("#div_tk").empty();
                $("#f_daan").empty();
                $("#kt_daan").empty();

                //<label for="daan_1">A.答案1。。。。。。。。。。。。。。。。。。。。。。。</label>
                //<label for="daan_2">B.答案2。。。。。。。。。。。。。。。。。。。。。。。</label>
                //<label for="daan_3">C.答案3。。。。。。。。。。。。。。。。。。。。。。。</label>
                //<label for="daan_4">D.答案4。。。。。。。。。。。。。。。。。。。。。。。</label>

                $("#div_tk").append("第"+(c_tk_num+1)+"题：" + kaotilist[kemu_num]["question"][c_tk_num].t_wenti);
                //$("#kt_daan").append("正确答案：" + kaotilist["listmap"][obj][c_da_num].t_daan);
                for(var i = 0;i < kaotilist[kemu_num]["question"][c_tk_num].answer.length; i ++){
                    $("#f_daan").append("<input name=\"wenti_"+kemu_num+"\" type=\"radio\" value=\""+kaotilist[kemu_num]["question"][c_tk_num].answer[i].id+"\" />");
                    $("#f_daan").append("<label>"+kaotilist[kemu_num]["question"][c_tk_num].answer[i].d_xuanxiangbiaohao + "." + kaotilist[kemu_num]["question"][c_tk_num].answer[i].d_xuanxiangneirong + "</label>");
                    //$("#f_daan").append("<label>"+kaotilist["listmap"][obj][c_da_num].d_xuanxiangbiaohao+"."+kaotilist["listmap"][obj][c_da_num].d_xuanxiangneirong +"</label>");
                }
                c_tk_num ++;
            }else{
                //结束
            }
        }
        function kemuChange(kemu){
            c_tk_num = 0;
            kemu_num = kemu;
            nextKaoti();
        }
        function init(){
            //var url = $.url(document.location);
            //alert(url);
            //var zhiwu = url.param("zhiwu");

            var zhiwu = getRequestParam("zhiwu");
            getKaoti(zhiwu);
        }

        $(function(){ 
            //init();
            //$("#a").click(function(){ 
                //adding your code here 
            //}); 

        }); 
        
        $("#page_lianxi").bind("pageshow", function(event){
                //var url = $.url(document.location);
                //var arg1 = url.param("arg1");
                init();
        });
    </script>
        <div data-role="header" >
            <h1>答题</h1>
        </div>
        <div data-role="content" >
            <div id="kt_ggw" style="background:url(images/aaa.png) 50% 0 no-repeat;background-size:cover;height: 50px">广告位</div>
            <label id="l_kemu"></label>
            <div id="div_tk"></div>
            <div><button>语音阅读</button></div>
            <fieldset id="f_daan">
            </fieldset>
            <label id="l_dangqian"></label>
            <button onclick="nextKaoti()">下一题</button>
            <fieldset id="f_kemu" data-role="fieldcontain">
            </fieldset>
        </div>
        <div data-role="footer" data-position="fixed" >
            <div data-role="navbar">
                <ul>
                    <li><a href="#anylink">首页</a></li>
                    <li><a href="#anylink">模拟考试</a></li>
                    <li><a href="#anylink">在线学习</a></li>
                    <li><a href="#anylink">在线练习</a></li>
                </ul>
            </div>
        </div>
    </div>
    </body>
</html>